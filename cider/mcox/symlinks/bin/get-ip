#!/usr/bin/env bash
#
# List out the network interfaces, types, and IPv4 addresses for Mac OS X
#
addresses=()

function join_by {
  local IFS="$1";
  shift;
  echo "$*";
}

if [[ "$(uname -s)" = "Darwin" ]]; then
  for INTERFACE in $(ifconfig -l); do
    IP=$(ifconfig "${INTERFACE}" | grep 'broadcast' | awk '{print $2}')
    if [[ -n "$IP" ]]; then
      TYPE=$(ifconfig -v "${INTERFACE}" | grep 'type' | awk '{print $2}')
      type_icon=""
      case $TYPE in
      Ethernet)
        type_icon=$(echo -ne '\uF6FF') # 
        ;;
      Wi-Fi)
        type_icon=$(echo -ne '\uF1EB') # 
        ;;
      *)
        type_icon=$(echo -ne '\uF0AC') # 
      esac
      #printf '%-8s (%3s): %s\n' "${TYPE}" "${INTERFACE}" "${IP}"
      addresses+=("$type_icon ${IP}")
    fi
  done
fi

join_by " | " $addresses
